#!/bin/bash

logfile=~/files/autopush.log
date=$(date "+%d-%m-%Y %T"):

log() {
    echo "$date - $1" >> "$logfile"
}

repos=()
while IFS= read -r line; do
    repos+=($line)
done < /home/niels/.autopushrc

for repo in ${repos[@]}; do
    log "Repository: $repo"
    (
        cd "$HOME/$repo"
        git pull >/dev/null 2>&1
        git add --all
        git add --update
        git commit -m "autopush $(date "+%d-%m-%Y %T")" && log "push complete"
        git push >/dev/null 2>&1
        
    )
done


