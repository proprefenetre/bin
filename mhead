#!/usr/bin/bash


VGA=$(xrandr -q | grep "1440x900+0+0" | awk '{print $1'})
LVDS=$(xrandr -q | grep "1366x768+1440+0" | awk '{print $1'})

if [[ $# != 0 ]]; then
    case $1 in
        -l ) xrandr --output $VGA --rotate left
            ;;
        -r ) xrandr --output $VGA --rotate right
            ;;
        # this acts weird. Returning the display back to normal only works 
        # with with "mhead -n" followed by the xrandr command below ("mhead")
        -n ) xrandr --output $VGA --rotate normal 
            ;;
        -i ) xrandr --output $LVDS --auto --output $VGA --auto --right-of $LVDS 
            ;;
        * )
            echo "usage:"
            echo "$0 [-l | -r | -n | -i]"
            echo "-l:   rotate left"
            echo "-r:   rotate right"
            echo "-n:   back to normal"
            echo "-i:   switch primary/secondary screen"
    esac
else
    if [[ $(xrandr | grep "$VGA disconnected") ]]; then
        xrandr --output $LVDS --auto --output $VGA --off 
    else
        xrandr --output $LVDS --auto --primary --output $VGA --auto --left-of $LVDS

    [[ -f $HOME/.fehbg ]] && . $HOME/.fehbg

        echo "+----------+"
        echo "|   $VGA   |+--------+"
        echo "|          || $LVDS  |"
        echo "+----------++--------+"
    fi        
fi
