#! /usr/bin/env bash

iface() {
    kind=$1
    echo "$(connmanctl technologies | grep $kind --after-context 3 | grep "Connected" | cut -d ' ' -f 5)"
}

wlan_iface="$(iw dev | grep "Interface" | cut -d' ' -f2)"
wlan_ssid="$(iw $wlan_iface link | grep -i 'ssid' | cut -d ' ' -f2-)"
state="$(connmanctl state | grep "State" | cut -d ' ' -f5)"

case $state in
    "online" )
        if [[ $(iface "wifi") == "True" ]]; then
            echo "   $wlan_ssid "
        else 
            if [[ $(iface "ethernet") == "True" ]]; then
            echo "   online "
            fi
        fi
        ;;

    "idle")
        echo "   offline "
        ;;
esac

